### 개인 숙제

### Use Case - 개인 페이지

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9848cd3e-bd2f-4135-8afb-f58a4cdfd287/Untitled.png)

### API 명세서

[API 명세서](https://www.notion.so/159b0f2c4de64af8b55629978717aaab)

### 질문의 답

1. 수정, 삭제API의 request를 어떤 방식으로 사용?
    1. 수정 :  PutMapping을 사용하여 아이디 값을 pathvalue로 받아옴
        1. 아이디 값을 식별자로 필요한 값을 식별할 수 있도록 함

    2. 삭제 : RequestParam을 사용하여 단일필드 값을 입력 받고 각 필드 값을 1:1 매칭을 한다.


2. 어떤 상황에서 어떤 방식의 request 사용?
    1. 조회 : Get
        1. db에 저장된 리스트를 전부 다 가져오는 방식을 했기에 따로 값을 받는 형식을 취하진 않았다.
        2. 또한 조회의 경우이기에 Get을 사용했다.

    2. 선택 조회 : GET / Id
        1. 일부 항목만 가져오는 방식의 호출이다
        2. Id값을 입력 받고 해당 Id가 있는 내용들을 db에서 가져오고 리스트로 만들어서 다시 보여준다

    3. 생성 : Post
        1. name / password / text 값을 json 형태로 입력 받고 @RequestBody로 json데이터를 spring내의 객체에 객체 매핑을 진행하고 해당 데이터를 데이터베이스에 저장해준다.

    4. 수정 : Patch
        1. 수정을 할 때 사용되는 메서드는 put과 patch가 존재한다고 한다. 이때 put은 일부 필드 변경 , patch는 전체 필드에 접근하여 수정을 한다 하여서 put을 사용했다.

    5. 삭제 : Delete
        1. 아이디 값과 비밀번호를 RequestParam으로 받아와서 해당 데이터를 db에서 제거된다.

3. RESTful한 API설계했는지?  어떤 부분에서 그렇게 생각했는지
    1. 메서드의 지정부분에서는 각 역할에 맞게 잘 설계했다고 생각한다. URI의 주소가 추후에 늘어날 수도 있기에 해당 부분에서 하나의 URI에 여러 개의 메서드를 실행하고 기능할 수 있게 하였다.
    2. 수정 부분의 경우 Id, 그리고 RequestDTO를 받아올 때 두개의 객체를 받아오는 부분이 좀 맘에 들지는 않는다. 만약 Id가 아닌 다른 부분으로 조회를 하는 경우도 생각해보려고 한다.

4. 적절하게 관심사 분리
    1. controller : url과 method가 들어오게 되면 해당 값들에 맞춰서 service에서 함수를 호출할 수 있도록 하였다. 그리고 return 값에 따라 프레젠테이션 레이어로 보내주는데 현재 프레젠테이션 레이어의 부재로 post man으로 체크
    2. service : controller에서 해당 메서드들이 호출이 되면 그에 맞게 repository부분에서 원하는 행동을 할 수 있도록 작성
    3. reposiroty : 해당 레포지토리 인터페이스에 jpaRepository를 상속 시켜 spring data jpa 연결
    4. entity : repository, 즉 db에 들어가는 테이블 객체를 표현 및 키 값 지정
    5. dto : Data Type Object :  해당 DTO를 통해 테이블 혹은 데이터 원본에 접근하는 것을 막고 데이터를 전달하는 객체로 지정
    6. 실제로 기능들은 service class 파일에 존재하며 이는 controller와 repository사이에서 해당 값들을 보내주고 받아온다.

---

### 숙련 과제 lv2

1. 회원가입 - User / 정규 표현식을 사용하여 조건에 맞춰 입력받기
2. 로그인 구현하기
    1. JWT 이용
    2. 발급 토큰 Header 추가 및 메세지, 상태코트와 함께 client 반환
3. 기존 게시글 API 명세서 수정

[API 명세서](https://www.notion.so/8562e8f9a3b7472ca52241ce8d34eaff)

### answer

1. 처음 설계한 API 명세서에 변경사항이 있었나요?
   변경 되었다면 어떤 점 때문 일까요? 첫 설계의 중요성에 대해 작성해 주세요!
    1. user라는 엔티티가 새로 생겨서 명세서를 수정해야했다. user라는 엔티티를 바탕으로 post도 같이 연계를 해야했기 때문이다.
    2. 만약 처음부터 user라는 객체를 포함해서 설계했다면 좀 더 쉽게 수정을 할 수 있었을 것이다.

2. ERD를 먼저 설계한 후 Entity를 개발했을 때 어떤 점이 도움이 되셨나요?
    1. db의 관계를 파악하고 설계하기가 용이했다.

3. JWT를 사용하여 인증/인가를 구현 했을 때의 장점은 무엇일까요?
    1. 수많은 유저에 관해서 각 유저를 구분하여 기능을 넣어줄 수 있다.

4. 반대로 JWT를 사용한 인증/인가의 한계점은 무엇일까요?
    1. 토큰의 유출

5. 만약 댓글 기능이 있는 블로그에서 댓글이 달려있는 게시글을 삭제하려고 한다면 무슨 문제가 발생할까요? Database 테이블 관점에서 해결방법이 무엇일까요?
    1. 게시글과 댓글이 같이 엮여있다면 댓글이 같이 삭제가 됨
    2. 해당 댓글을 달았던 유저의 정보가 삭제

6. IoC / DI 에 대해 간략하게 설명해 주세요!
    1. 만약 의존하는 객체를 명시만 해주고 외부에서 가져와서 사용한다. 만약 수정이 되는 경우가 각 변동사항을 하나씩 다 체크하는 방식이 아닌 주입을 통한 방식으로 유연한 개발이 가능하다.

---

ERD

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d4161039-7cc2-4877-bb87-b7c3d86fea03/Untitled.png)

추가 요구 사항

1. 회원의 비밀번호 정규식에 특수문자까지 포함으로 변경
2. user에 회원 권한 부여하기 ( USER, ADMIN )
    1. enum으로 처리
    2. ADMIN의 경우 모든 게시글, 댓글 수정 / 삭제 가능
3. 댓글 작성
    1. 토큰을 검사, 유효 토큰이면 댓글 가능
    2. 게시글 DB에 저장 유무 파악
    3. 게시글 조회 시 댓글까지 조회
4. 댓글 수정
    1. 토큰 검사 후, 유효 토큰인지 확인(Validate) ?  댓글 수정 가능 : 수정 불가능
    2. 댓글 DB저장 유무 확인
    3. 수정 후 수정 댓글 반환
5. 댓글 삭제
    1. 토큰 검사 ? 삭제 :  삭제 불가
    2. 저장 유무 확인
    3. 메세지 출력
6. 예외 처리
    1. 정상 토큰 아닐 시 메시지 반환, http status code 400
    2. 유효 토큰 ? 가능 : 수정, 삭제 불가 메세지 출력
    3. 유효 토큰 ? 가능 : 회원 찾기 불가 메세지 출력
7. 게시글 호출 시 모든 댓글 같이 출력
8. 댓글은 날짜 기준 내림차순
